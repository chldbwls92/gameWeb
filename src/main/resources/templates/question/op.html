<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">

<body>
	<article layout:fragment="contents">
		<div class="d-flex justify-content-center align-items-center">
			<h1 class="text-white mt-5">문의사항(운영자)</h1>
		</div>
		
		<!-- 문의사항 list -->
		<div th:each="question:${questionList}" class="text-center text-white mt-5">
			<!-- 사용자 문의사항 내용 -->
			<div>
				<div class="d-flex justify-content-center">
					<div th:text="${question.loginId}">유저이름</div><button type="button" id="deleteBtn" class="btn btn-danger btn-sm mb-2 ml-2" th:data-question-id="${question.questionId}">삭제</button>
				</div>
				<div th:text="${question.contents}">내용</div>
			</div>
			<!-- 운영자 답변 -->
			<div> <!-- 내용 -->
				<div th:each="answer:${question.answerList}" class="text-warning">
					<div th:text="| -> 운영자 : ${answer.contents}|"> -> 운영자 : 운영자 답글 내용</div>
				</div>
				<div> <!-- 작성 -->
					<input id="answerInput" type="text" style="width:300px;" class="mt-5 small rounded text-center" placeholder="답변을 입력해주세요">
				</div>
			</div>
		</div>

	</article>
</body>

<script layout:fragment="script">
	$(document).ready(function() {
		
		// 삭제버튼(deleteBtn)이 클릭됐을 때
		$(document).on("click", "#deleteBtn", function() {
			let id = $(this).data("question-id")
			
			$.ajax({
				type:"delete"
				, url:"/question/delete"
				, data:{"id":id}
				, success:function(response) {
					if(response.result == "success") {
						location.reload();
					} else {
						alert("삭제 실패");
					}
				}
				, error:function() {
					alert("삭제 에러");
				}
			})
		})
	})
</script>

</html>